<Prefab>
  <Constants>
    <Constant Name="Troop.Background.Width" BrushName="Order.Troop.Background" BrushLayer="Default" BrushValueType="Width" MultiplyResult="0.75"/>
    <Constant Name="Troop.Background.Height" BrushName="Order.Troop.Background" BrushLayer="Default" BrushValueType="Height" MultiplyResult="0.75"/>

    <Constant Name="Troop.Icon.Width" BrushName="Order.Troop.Icon" BrushLayer="Default" BrushValueType="Width" MultiplyResult="0.75"/>
    <Constant Name="Troop.Icon.Height" BrushName="Order.Troop.Icon" BrushLayer="Default" BrushValueType="Height" MultiplyResult="0.75"/>

  </Constants>
  <Window>
    <Widget DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
      <Children>
        <Siege />
        <Widget IsVisible="@IsToggleOrderShown" DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
          <Children>
            <Widget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Top" MarginTop="25" IsVisible="@IsTroopListShown">
              <Children>

                <ListPanel DataSource="{TroopController\TroopList}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" >
                  <ItemTemplate>
                    <OrderTroopItem />
                  </ItemTemplate>
                </ListPanel>

              </Children>
            </Widget>
            
            <ListPanel DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Bottom" MarginBottom="60">
              <Children>
              <!-- used for debugging -->
                <!-- <OrderReturnButtonWidget Command.Click="OnEscape" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="62" SuggestedHeight="62" Brush="Order.Item.Background" VerticalAlignment="Bottom" IconWidget="Icon" InputVisualParent="InputVisualParent" OrderIconID="Return" IsDeployment="@IsDeployment" CanUseShortcuts="@CanUseShortcuts" IsHolding="@IsHolding" IsAnyOrderSetActive="@IsAnyOrderSetActive">
                  <Children>

                    <Widget Id="Icon" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MarginTop="15" MarginBottom="15" MarginLeft="15" MarginRight="15" />

                    <Widget Id="InputVisualParent" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="55" SuggestedHeight="55" HorizontalAlignment="Center" VerticalAlignment="Top" PositionYOffset="-30">
                      <Children>
                        <InputKeyVisualWidget DataSource="{CancelInputKey}" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" KeyID="@KeyID" HideIfNone="true" IsVisible="@IsVisible" />
                      </Children>
                    </Widget>

                    <TextWidget Text="@ReturnText" WidthSizePolicy="Fixed" SuggestedWidth="100" HeightSizePolicy="Fixed" SuggestedHeight="25" VerticalAlignment="Bottom" HorizontalAlignment="Center" PositionYOffset="10" Brush="Order.Item.DescriptionText.Radial"/>

                  </Children>
                </OrderReturnButtonWidget> -->
                <!--Order Sets-->
                <ListPanel DoNotAcceptEvents="true" DataSource="{OrderSets}" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" VerticalAlignment="Center" MarginLeft="300" >
                  <ItemTemplate>
                    <OrderSetRadial MarginLeft="-50" MarginRight="-290"  MinWidth="300"/>
                  </ItemTemplate>
                </ListPanel>
                
                <!--Exit Button Visual-->
                <!-- <OrderReturnButtonWidget Command.Click="OnEscape" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="62" SuggestedHeight="62" Brush="Order.Item.Background" VerticalAlignment="Bottom" IconWidget="Icon" InputVisualParent="InputVisualParent" OrderIconID="Return" IsDeployment="@IsDeployment" CanUseShortcuts="@CanUseShortcuts" IsHolding="@IsHolding" IsAnyOrderSetActive="@IsAnyOrderSetActive">
                  <Children>

                    <Widget Id="Icon" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MarginTop="15" MarginBottom="15" MarginLeft="15" MarginRight="15" />

                    <Widget Id="InputVisualParent" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="55" SuggestedHeight="55" HorizontalAlignment="Center" VerticalAlignment="Top" PositionYOffset="-30">
                      <Children>
                        <InputKeyVisualWidget DataSource="{CancelInputKey}" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" KeyID="@KeyID" HideIfNone="true" IsVisible="@IsVisible" />
                      </Children>
                    </Widget>

                    <TextWidget Text="@ReturnText" WidthSizePolicy="Fixed" SuggestedWidth="100" HeightSizePolicy="Fixed" SuggestedHeight="25" VerticalAlignment="Bottom" HorizontalAlignment="Center" PositionYOffset="10" Brush="Order.Item.DescriptionText.Radial"/>

                  </Children>
                </OrderReturnButtonWidget> -->
                
              </Children>
            </ListPanel>
            <!-- <ListPanel DoNotAcceptEvents="true" DataSource="{OrderSets}" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" HorizontalAlignment="Center" VerticalAlignment="Bottom" MarginBottom="-350">
              <ItemTemplate>
                <OrderSetItemRadial MarginLeft="170" MarginRight="-485" />
              </ItemTemplate>
            </ListPanel> -->

          </Children>
        </Widget>
        <OrderTransferPopup DataSource="{TroopController}"/>
      </Children>
    </Widget>
  </Window>
</Prefab>